<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="generator" content="Bootply" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel=icon href=/content/images/favicon.ico>
		<title>Jasper - Routing Messages</title>
		<link href="/content/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<link href="/content/theme.css" rel="stylesheet" type="text/css" />
		<link href="/content/prism.css" rel="stylesheet" type="text/css" />




        <link rel="apple-touch-icon" href="/bootstrap/img/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/bootstrap/img/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/bootstrap/img/apple-touch-icon-114x114.png">

        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
	
	
	
		<style>
		
		
		
		</style>
	</head>

    <!-- HTML code from Bootply.com editor -->

    <body  >




	<header>
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-primary" id="nav">
			<a href="/" class="navbar-brand">Jasper</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
			  <span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarCollapse">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item"><a class="nav-link" href="/documentation" title="Documentation">Documentation</a></li>
					<li class="nav-item"><a class="nav-link" href="/documentation/getting_started" title="Getting Started">Getting Started</a></li>

					
				</ul>

				<ul class="navbar-nav justify-content-end">
					<li class="nav-item"><a class="nav-link" href="/documentation/integration/correlation" title="Message Correlation">Previous</a></li>
					<li class="nav-item"><a class="nav-link" href="/documentation/integration/scheduled" title="Scheduled Message Delivery and Execution">Next</a></li>
					<li class="nav-item">
						<a title="Open the GitHub file for this page" href="https://github.com/JasperFx/jasper/blob/master/documentation/documentation/integration/routing.md"  class="nav-link" style="margin-right: 10px;"><i class="fa fa-github"></i> Edit on GitHub</a>
					</li>
				</ul>
				
				<form class="form-inline mt-2 mt-md-0">
					<input id="search" class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" id="search">
				  </form>
		  </div>

		</nav>
	</header>

	<main role="main" style="margin-top:75px">



		<!--main-->
		<div class="container">
			<nav aria-label="breadcrumb">
				<ol class="breadcrumb"><li><a href="/">JasperFx</a></li><li><a href="/documentation">Documentation</a></li><li><a href="/documentation/integration">Messaging Between Systems</a></li><li class="active">Routing Messages</li></ol>
				
			</nav>
			

			<div class="row">
		      <!--left-->

		      <div class="col-md-3" id="leftCol">
				<h5><strong></strong></h5><img src="/content/jasper-icon.png" style="max-width:100%" />

				<br />
				<br />

			  <ul id="sidebar" class="list-group" style="padding-bottom: 20px;">

			  </ul>
			  	  <h3 class="no-margin">Version</h3><p>1.1.0</p>
				  <h3 class="no-margin">Next</h3><p><a href="/documentation/integration/scheduled">Scheduled Message Delivery and Execution</a></p>
				  <h3 class="no-margin">Previous</h3><a href="/documentation/integration/correlation">Message Correlation</a></p>

			  </ul>
		      </div><!--/left-->

		      <!--right-->
		      <div class="col-md-9">

			      	<h1>Routing Messages</h1>

			      	<hr />

			      	<div id="main-pane">

			      		<!--title:Routing Messages-->
<p>When you publish a message using <code>IMessageContext</code> without explicitly setting the Uri of the desired
destination, Jasper has to invoke the known message routing rules and dynamic subscriptions to
figure out which locations should receive the message. Consider this code that publishes a
<code>PingMessage</code>:</p>
<pre><code class="language-csharp">&#xA;public class SendingExample&#xA;{&#xA;    public async Task SendPingsAndPongs(IMessageContext bus)&#xA;    {&#xA;        // Publish a message&#xA;        await bus.Send(new PingMessage());&#xA;    }&#xA;}&#xA;</code></pre>
<p>To route <code>PingMessage</code> to a channel, we can apply static message routing rules by using the
<code>Endpoint.Publish()</code> method as shown below:</p>
<pre><code class="language-csharp">&#xA;public class StaticPublishingRulesApp : JasperOptions&#xA;{&#xA;    public StaticPublishingRulesApp()&#xA;    {&#xA;        Endpoints.Publish(x =&gt;&#xA;        {&#xA;            // Apply as many message matching&#xA;            // rules as you need&#xA;&#xA;            // Specific message types&#xA;            x.Message&lt;PingMessage&gt;();&#xA;            x.Message&lt;Message1&gt;();&#xA;&#xA;            // All types in a certain assembly&#xA;            x.MessagesFromAssemblyContaining&lt;PingMessage&gt;();&#xA;&#xA;            // or this&#xA;            x.MessagesFromAssembly(typeof(PingMessage).Assembly);&#xA;&#xA;            // or by namespace&#xA;            x.MessagesFromNamespace(&quot;MyMessageLibrary&quot;);&#xA;            x.MessagesFromNamespaceContaining&lt;PingMessage&gt;();&#xA;&#xA;            // Express the subscribers&#xA;            x.ToPort(1111);&#xA;            x.ToPort(2222);&#xA;        });&#xA;&#xA;        // Or you just send all messages to a certain endpoint&#xA;        Endpoints.PublishAllMessages().ToPort(3333);&#xA;    }&#xA;</code></pre>
<p>Do note that doing the message type filtering by namespace will also include child namespaces. In
our own usage we try to rely on either namespace rules or by using shared message assemblies.</p>

			      	</div>

			      	<hr />

			      	<nav>
				        <span>
				        	<strong>Previous: </strong><a href="/documentation/integration/correlation">Message Correlation</a>

				        </span>
				        <span class="pull-right">

				        	<strong>Next: </strong><a href="/documentation/integration/scheduled">Scheduled Message Delivery and Execution</a>

				        </span>
			      	</nav>

		      </div><!--/right-->
			  </div><!--/row-->
			  
			  <br />
			  <br />
		</div><!--/container-->
	</main>
<script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$('#search').keyup(function(e){
  if(e.keyCode == 13) {
    var search = $('#search').val();

    var url = 'https://www.google.com/#q=site:http://jasperfx.github.io ' + search;
    url = encodeURI(url);

    //alert(url);

    window.location.href = url;

    e.stopPropagation();
    if (e.cancelBubble!=null) e.cancelBubble = true;
    return false;
  }



});

$('ol.breadcrumb > li').each(function(i,li){
	$(li).addClass('breadcrumb-item');
});

</script>
    </body>


    <foot>
        <script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

		<script type="text/javascript" src="/content/bootstrap.min.js"></script>
        <script type="text/javascript" src="/content/embed.js"></script>
        <script type="text/javascript" src="/content/prism.js"></script>
        <script type="text/javascript" src="/content/sidebar.js"></script>
    </foot>
</html>
